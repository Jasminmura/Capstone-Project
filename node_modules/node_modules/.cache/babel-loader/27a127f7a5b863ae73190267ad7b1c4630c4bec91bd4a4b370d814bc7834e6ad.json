{"ast":null,"code":"var _jsxFileName = \"/Users/macbookairm2/Desktop/Fozz/WeatherGuide/frontend/src/components/MapComponent.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/MapComponent.js\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Import default Leaflet marker images\nimport markerIcon2x from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapComponent({\n  onLocationSelect,\n  selectedLocation\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n  useEffect(() => {\n    if (mapRef.current) return; // Prevent re-initialization in React 18's Strict Mode\n\n    // 1. Initialize the map\n    mapRef.current = L.map('map', {\n      center: [51.505, -0.09],\n      zoom: 5\n    });\n\n    // 2. Add OSM tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors'\n    }).addTo(mapRef.current);\n\n    // 3. Set up the default Leaflet icon manually\n    const defaultIcon = L.icon({\n      iconRetinaUrl: markerIcon2x,\n      iconUrl: markerIcon,\n      shadowUrl: markerShadow,\n      iconSize: [25, 41],\n      iconAnchor: [12, 41],\n      popupAnchor: [1, -34],\n      shadowSize: [41, 41]\n    });\n\n    // 4. Create a marker at the initial location, using our custom default icon\n    markerRef.current = L.marker([51.505, -0.09], {\n      icon: defaultIcon\n    }).addTo(mapRef.current);\n\n    // 5. Click handler\n    function handleMapClick(e) {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      markerRef.current.setLatLng(e.latlng);\n      mapRef.current.setView([lat, lng], 8); // Re-center and zoom in a bit\n      onLocationSelect(lat, lng);\n    }\n    mapRef.current.on('click', handleMapClick);\n\n    // 6. Cleanup when component unmounts\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('click', handleMapClick);\n        mapRef.current.remove();\n        mapRef.current = null;\n        markerRef.current = null;\n      }\n    };\n  }, [onLocationSelect]);\n\n  // If selectedLocation changes, move the marker & center the map\n  useEffect(() => {\n    if (selectedLocation.lat != null && selectedLocation.lon != null && mapRef.current && markerRef.current) {\n      const {\n        lat,\n        lon\n      } = selectedLocation;\n      markerRef.current.setLatLng([lat, lon]);\n      mapRef.current.setView([lat, lon], 8);\n    }\n  }, [selectedLocation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginBottom: '0.5rem',\n        color: '#333'\n      },\n      children: \"Pick a Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '0.9rem',\n        color: '#666',\n        marginBottom: '1rem'\n      },\n      children: \"Click anywhere on the map to drop a marker.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: {\n        width: '100%',\n        height: '400px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-coords\",\n      style: {\n        marginTop: '1rem'\n      },\n      children: [\"Selected Latitude:\", ' ', selectedLocation.lat ? selectedLocation.lat.toFixed(5) : '-', \", Longitude:\", ' ', selectedLocation.lon ? selectedLocation.lon.toFixed(5) : '-']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(MapComponent, \"53lRkOOrjHY5rpoe2vY/YdK0VDw=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","L","markerIcon2x","markerIcon","markerShadow","jsxDEV","_jsxDEV","MapComponent","onLocationSelect","selectedLocation","_s","mapRef","markerRef","current","map","center","zoom","tileLayer","attribution","addTo","defaultIcon","icon","iconRetinaUrl","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","marker","handleMapClick","e","lat","lng","latlng","setLatLng","setView","on","off","remove","lon","children","style","marginBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","id","width","height","className","marginTop","toFixed","_c","$RefreshReg$"],"sources":["/Users/macbookairm2/Desktop/Fozz/WeatherGuide/frontend/src/components/MapComponent.js"],"sourcesContent":["// frontend/src/components/MapComponent.js\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Import default Leaflet marker images\nimport markerIcon2x from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\n\nfunction MapComponent({ onLocationSelect, selectedLocation }) {\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n\n  useEffect(() => {\n    if (mapRef.current) return; // Prevent re-initialization in React 18's Strict Mode\n\n    // 1. Initialize the map\n    mapRef.current = L.map('map', {\n      center: [51.505, -0.09],\n      zoom: 5,\n    });\n\n    // 2. Add OSM tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors',\n    }).addTo(mapRef.current);\n\n    // 3. Set up the default Leaflet icon manually\n    const defaultIcon = L.icon({\n      iconRetinaUrl: markerIcon2x,\n      iconUrl: markerIcon,\n      shadowUrl: markerShadow,\n      iconSize: [25, 41],\n      iconAnchor: [12, 41],\n      popupAnchor: [1, -34],\n      shadowSize: [41, 41]\n    });\n\n    // 4. Create a marker at the initial location, using our custom default icon\n    markerRef.current = L.marker([51.505, -0.09], { icon: defaultIcon }).addTo(mapRef.current);\n\n    // 5. Click handler\n    function handleMapClick(e) {\n      const { lat, lng } = e.latlng;\n      markerRef.current.setLatLng(e.latlng);\n      mapRef.current.setView([lat, lng], 8); // Re-center and zoom in a bit\n      onLocationSelect(lat, lng);\n    }\n\n    mapRef.current.on('click', handleMapClick);\n\n    // 6. Cleanup when component unmounts\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('click', handleMapClick);\n        mapRef.current.remove();\n        mapRef.current = null;\n        markerRef.current = null;\n      }\n    };\n  }, [onLocationSelect]);\n\n  // If selectedLocation changes, move the marker & center the map\n  useEffect(() => {\n    if (selectedLocation.lat != null && selectedLocation.lon != null && mapRef.current && markerRef.current) {\n      const { lat, lon } = selectedLocation;\n      markerRef.current.setLatLng([lat, lon]);\n      mapRef.current.setView([lat, lon], 8);\n    }\n  }, [selectedLocation]);\n\n  return (\n    <div>\n      <h2 style={{ marginBottom: '0.5rem', color: '#333' }}>Pick a Location</h2>\n      <p style={{ fontSize: '0.9rem', color: '#666', marginBottom: '1rem' }}>\n        Click anywhere on the map to drop a marker.\n      </p>\n      {/* The map needs a height to be visible */}\n      <div id=\"map\" style={{ width: '100%', height: '400px' }}></div>\n      <div className=\"selected-coords\" style={{ marginTop: '1rem' }}>\n        Selected Latitude:{' '}\n        {selectedLocation.lat ? selectedLocation.lat.toFixed(5) : '-'},\n        Longitude:{' '}\n        {selectedLocation.lon ? selectedLocation.lon.toFixed(5) : '-'}\n      </div>\n    </div>\n  );\n}\n\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}