{"ast":null,"code":"var _jsxFileName = \"/Users/macbookairm2/Desktop/Fozz/WeatherGuide/frontend/src/components/MapComponent.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/MapComponent.js\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapComponent({\n  onLocationSelect,\n  selectedLocation\n}) {\n  _s();\n  // Using refs to store map and marker instances so they persist across re-renders.\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n  useEffect(() => {\n    // If mapRef is already set, don’t re-initialize.\n    if (mapRef.current) return;\n\n    // 1. Initialize the map once, with a moderate initial zoom (5).\n    mapRef.current = L.map('map', {\n      center: [51.505, -0.09],\n      zoom: 5\n    });\n\n    // 2. Add a tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors'\n    }).addTo(mapRef.current);\n\n    // 3. Create a marker at the initial location\n    markerRef.current = L.marker([51.505, -0.09]).addTo(mapRef.current);\n\n    // 4. Map click handler: move marker, call onLocationSelect,\n    //    and optionally zoom in a bit.\n    function handleMapClick(e) {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      markerRef.current.setLatLng(e.latlng);\n      // Re-center the map on the clicked point; zoom in a bit.\n      mapRef.current.setView([lat, lng], 8);\n      // Inform parent of new lat/lon\n      onLocationSelect(lat, lng);\n    }\n\n    // Attach event listener\n    mapRef.current.on('click', handleMapClick);\n\n    // Cleanup on unmount\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('click', handleMapClick);\n        mapRef.current.remove();\n        mapRef.current = null;\n        markerRef.current = null;\n      }\n    };\n  }, [onLocationSelect]);\n\n  // If selectedLocation changes (e.g., user typed a city name), move the marker + adjust view\n  useEffect(() => {\n    if (selectedLocation.lat != null && selectedLocation.lon != null && mapRef.current && markerRef.current) {\n      const {\n        lat,\n        lon\n      } = selectedLocation;\n      markerRef.current.setLatLng([lat, lon]);\n      // Center the map on the new location with a decent zoom level.\n      mapRef.current.setView([lat, lon], 8);\n    }\n  }, [selectedLocation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginBottom: '0.5rem',\n        color: '#333'\n      },\n      children: \"Pick a Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '0.9rem',\n        color: '#666',\n        marginBottom: '1rem'\n      },\n      children: \"Click anywhere on the map to drop a marker. Or enter a city name in the form to jump there.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: {\n        width: '100%',\n        height: '400px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-coords\",\n      style: {\n        marginTop: '1rem'\n      },\n      children: [\"Selected Latitude: \", selectedLocation.lat ? selectedLocation.lat.toFixed(5) : '-', \", Longitude: \", selectedLocation.lon ? selectedLocation.lon.toFixed(5) : '-']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(MapComponent, \"53lRkOOrjHY5rpoe2vY/YdK0VDw=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","MapComponent","onLocationSelect","selectedLocation","_s","mapRef","markerRef","current","map","center","zoom","tileLayer","attribution","addTo","marker","handleMapClick","e","lat","lng","latlng","setLatLng","setView","on","off","remove","lon","children","style","marginBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","id","width","height","className","marginTop","toFixed","_c","$RefreshReg$"],"sources":["/Users/macbookairm2/Desktop/Fozz/WeatherGuide/frontend/src/components/MapComponent.js"],"sourcesContent":["// frontend/src/components/MapComponent.js\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nfunction MapComponent({ onLocationSelect, selectedLocation }) {\n  // Using refs to store map and marker instances so they persist across re-renders.\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n\n  useEffect(() => {\n    // If mapRef is already set, don’t re-initialize.\n    if (mapRef.current) return;\n\n    // 1. Initialize the map once, with a moderate initial zoom (5).\n    mapRef.current = L.map('map', {\n      center: [51.505, -0.09],\n      zoom: 5,\n    });\n\n    // 2. Add a tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors',\n    }).addTo(mapRef.current);\n\n    // 3. Create a marker at the initial location\n    markerRef.current = L.marker([51.505, -0.09]).addTo(mapRef.current);\n\n    // 4. Map click handler: move marker, call onLocationSelect,\n    //    and optionally zoom in a bit.\n    function handleMapClick(e) {\n      const { lat, lng } = e.latlng;\n      markerRef.current.setLatLng(e.latlng);\n      // Re-center the map on the clicked point; zoom in a bit.\n      mapRef.current.setView([lat, lng], 8);\n      // Inform parent of new lat/lon\n      onLocationSelect(lat, lng);\n    }\n\n    // Attach event listener\n    mapRef.current.on('click', handleMapClick);\n\n    // Cleanup on unmount\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('click', handleMapClick);\n        mapRef.current.remove();\n        mapRef.current = null;\n        markerRef.current = null;\n      }\n    };\n  }, [onLocationSelect]);\n\n  // If selectedLocation changes (e.g., user typed a city name), move the marker + adjust view\n  useEffect(() => {\n    if (\n      selectedLocation.lat != null &&\n      selectedLocation.lon != null &&\n      mapRef.current &&\n      markerRef.current\n    ) {\n      const { lat, lon } = selectedLocation;\n      markerRef.current.setLatLng([lat, lon]);\n      // Center the map on the new location with a decent zoom level.\n      mapRef.current.setView([lat, lon], 8);\n    }\n  }, [selectedLocation]);\n\n  return (\n    <div>\n      <h2 style={{ marginBottom: '0.5rem', color: '#333' }}>Pick a Location</h2>\n      <p style={{ fontSize: '0.9rem', color: '#666', marginBottom: '1rem' }}>\n        Click anywhere on the map to drop a marker. \n        Or enter a city name in the form to jump there.\n      </p>\n      {/* IMPORTANT: This DIV needs a fixed height or Leaflet won't be visible */}\n      <div id=\"map\" style={{ width: '100%', height: '400px' }}></div>\n\n      {/* Display chosen coords */}\n      <div className=\"selected-coords\" style={{ marginTop: '1rem' }}>\n        Selected Latitude: {selectedLocation.lat ? selectedLocation.lat.toFixed(5) : '-'},\n        Longitude: {selectedLocation.lon ? selectedLocation.lon.toFixed(5) : '-'}\n      </div>\n    </div>\n  );\n}\n\nexport default MapComponent;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,SAASC,YAAYA,CAAC;EAAEC,gBAAgB;EAAEC;AAAiB,CAAC,EAAE;EAAAC,EAAA;EAC5D;EACA,MAAMC,MAAM,GAAGR,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMS,SAAS,GAAGT,MAAM,CAAC,IAAI,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd;IACA,IAAIS,MAAM,CAACE,OAAO,EAAE;;IAEpB;IACAF,MAAM,CAACE,OAAO,GAAGT,CAAC,CAACU,GAAG,CAAC,KAAK,EAAE;MAC5BC,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC;MACvBC,IAAI,EAAE;IACR,CAAC,CAAC;;IAEF;IACAZ,CAAC,CAACa,SAAS,CAAC,oDAAoD,EAAE;MAChEC,WAAW,EAAE;IACf,CAAC,CAAC,CAACC,KAAK,CAACR,MAAM,CAACE,OAAO,CAAC;;IAExB;IACAD,SAAS,CAACC,OAAO,GAAGT,CAAC,CAACgB,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,CAACD,KAAK,CAACR,MAAM,CAACE,OAAO,CAAC;;IAEnE;IACA;IACA,SAASQ,cAAcA,CAACC,CAAC,EAAE;MACzB,MAAM;QAAEC,GAAG;QAAEC;MAAI,CAAC,GAAGF,CAAC,CAACG,MAAM;MAC7Bb,SAAS,CAACC,OAAO,CAACa,SAAS,CAACJ,CAAC,CAACG,MAAM,CAAC;MACrC;MACAd,MAAM,CAACE,OAAO,CAACc,OAAO,CAAC,CAACJ,GAAG,EAAEC,GAAG,CAAC,EAAE,CAAC,CAAC;MACrC;MACAhB,gBAAgB,CAACe,GAAG,EAAEC,GAAG,CAAC;IAC5B;;IAEA;IACAb,MAAM,CAACE,OAAO,CAACe,EAAE,CAAC,OAAO,EAAEP,cAAc,CAAC;;IAE1C;IACA,OAAO,MAAM;MACX,IAAIV,MAAM,CAACE,OAAO,EAAE;QAClBF,MAAM,CAACE,OAAO,CAACgB,GAAG,CAAC,OAAO,EAAER,cAAc,CAAC;QAC3CV,MAAM,CAACE,OAAO,CAACiB,MAAM,CAAC,CAAC;QACvBnB,MAAM,CAACE,OAAO,GAAG,IAAI;QACrBD,SAAS,CAACC,OAAO,GAAG,IAAI;MAC1B;IACF,CAAC;EACH,CAAC,EAAE,CAACL,gBAAgB,CAAC,CAAC;;EAEtB;EACAN,SAAS,CAAC,MAAM;IACd,IACEO,gBAAgB,CAACc,GAAG,IAAI,IAAI,IAC5Bd,gBAAgB,CAACsB,GAAG,IAAI,IAAI,IAC5BpB,MAAM,CAACE,OAAO,IACdD,SAAS,CAACC,OAAO,EACjB;MACA,MAAM;QAAEU,GAAG;QAAEQ;MAAI,CAAC,GAAGtB,gBAAgB;MACrCG,SAAS,CAACC,OAAO,CAACa,SAAS,CAAC,CAACH,GAAG,EAAEQ,GAAG,CAAC,CAAC;MACvC;MACApB,MAAM,CAACE,OAAO,CAACc,OAAO,CAAC,CAACJ,GAAG,EAAEQ,GAAG,CAAC,EAAE,CAAC,CAAC;IACvC;EACF,CAAC,EAAE,CAACtB,gBAAgB,CAAC,CAAC;EAEtB,oBACEH,OAAA;IAAA0B,QAAA,gBACE1B,OAAA;MAAI2B,KAAK,EAAE;QAAEC,YAAY,EAAE,QAAQ;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAH,QAAA,EAAC;IAAe;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC1EjC,OAAA;MAAG2B,KAAK,EAAE;QAAEO,QAAQ,EAAE,QAAQ;QAAEL,KAAK,EAAE,MAAM;QAAED,YAAY,EAAE;MAAO,CAAE;MAAAF,QAAA,EAAC;IAGvE;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAEJjC,OAAA;MAAKmC,EAAE,EAAC,KAAK;MAACR,KAAK,EAAE;QAAES,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAQ;IAAE;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAG/DjC,OAAA;MAAKsC,SAAS,EAAC,iBAAiB;MAACX,KAAK,EAAE;QAAEY,SAAS,EAAE;MAAO,CAAE;MAAAb,QAAA,GAAC,qBAC1C,EAACvB,gBAAgB,CAACc,GAAG,GAAGd,gBAAgB,CAACc,GAAG,CAACuB,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,EAAC,eACtE,EAACrC,gBAAgB,CAACsB,GAAG,GAAGtB,gBAAgB,CAACsB,GAAG,CAACe,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG;IAAA;MAAAV,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC7B,EAAA,CAhFQH,YAAY;AAAAwC,EAAA,GAAZxC,YAAY;AAkFrB,eAAeA,YAAY;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}