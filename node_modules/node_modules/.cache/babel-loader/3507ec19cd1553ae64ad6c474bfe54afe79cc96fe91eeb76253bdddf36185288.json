{"ast":null,"code":"var _jsxFileName = \"/Users/macbookairm2/Desktop/Fozz/WeatherGuide/frontend/src/components/MapComponent.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/MapComponent.js\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapComponent({\n  onLocationSelect,\n  selectedLocation\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n  useEffect(() => {\n    // If map is already initialized, don't re-initialize\n    if (mapRef.current) return;\n\n    // 1. Initialize the map\n    mapRef.current = L.map('map').setView([51.505, -0.09], 2);\n\n    // 2. Load OSM tiles\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors'\n    }).addTo(mapRef.current);\n\n    // 3. Add a default marker\n    markerRef.current = L.marker([51.505, -0.09]).addTo(mapRef.current);\n\n    // 4. Map click handler\n    function onMapClick(e) {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      // Move the marker to the clicked position\n      markerRef.current.setLatLng(e.latlng);\n      // Call parent to store lat/lon\n      onLocationSelect(lat, lng);\n    }\n    mapRef.current.on('click', onMapClick);\n\n    // 5. Cleanup on unmount\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('click', onMapClick);\n        mapRef.current.remove();\n        mapRef.current = null;\n        markerRef.current = null;\n      }\n    };\n  }, [onLocationSelect]);\n\n  // If the user selects a location (e.g., from geocode), \n  // update the marker and map view if needed.\n  useEffect(() => {\n    if (selectedLocation.lat != null && selectedLocation.lon != null && markerRef.current) {\n      markerRef.current.setLatLng([selectedLocation.lat, selectedLocation.lon]);\n      // Optional: zoom in on that location\n      mapRef.current.setView([selectedLocation.lat, selectedLocation.lon], 10);\n    }\n  }, [selectedLocation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: {\n        height: '400px',\n        width: '100%',\n        margin: '10px 0'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Selected Latitude:\", ' ', selectedLocation.lat ? selectedLocation.lat.toFixed(5) : '-', \", Longitude:\", ' ', selectedLocation.lon ? selectedLocation.lon.toFixed(5) : '-']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(MapComponent, \"53lRkOOrjHY5rpoe2vY/YdK0VDw=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","MapComponent","onLocationSelect","selectedLocation","_s","mapRef","markerRef","current","map","setView","tileLayer","attribution","addTo","marker","onMapClick","e","lat","lng","latlng","setLatLng","on","off","remove","lon","children","fileName","_jsxFileName","lineNumber","columnNumber","id","style","height","width","margin","toFixed","_c","$RefreshReg$"],"sources":["/Users/macbookairm2/Desktop/Fozz/WeatherGuide/frontend/src/components/MapComponent.js"],"sourcesContent":["// frontend/src/components/MapComponent.js\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nfunction MapComponent({ onLocationSelect, selectedLocation }) {\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n\n  useEffect(() => {\n    // If map is already initialized, don't re-initialize\n    if (mapRef.current) return;\n\n    // 1. Initialize the map\n    mapRef.current = L.map('map').setView([51.505, -0.09], 2);\n\n    // 2. Load OSM tiles\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors'\n    }).addTo(mapRef.current);\n\n    // 3. Add a default marker\n    markerRef.current = L.marker([51.505, -0.09]).addTo(mapRef.current);\n\n    // 4. Map click handler\n    function onMapClick(e) {\n      const { lat, lng } = e.latlng;\n      // Move the marker to the clicked position\n      markerRef.current.setLatLng(e.latlng);\n      // Call parent to store lat/lon\n      onLocationSelect(lat, lng);\n    }\n\n    mapRef.current.on('click', onMapClick);\n\n    // 5. Cleanup on unmount\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.off('click', onMapClick);\n        mapRef.current.remove();\n        mapRef.current = null;\n        markerRef.current = null;\n      }\n    };\n  }, [onLocationSelect]);\n\n  // If the user selects a location (e.g., from geocode), \n  // update the marker and map view if needed.\n  useEffect(() => {\n    if (\n      selectedLocation.lat != null &&\n      selectedLocation.lon != null &&\n      markerRef.current\n    ) {\n      markerRef.current.setLatLng([selectedLocation.lat, selectedLocation.lon]);\n      // Optional: zoom in on that location\n      mapRef.current.setView([selectedLocation.lat, selectedLocation.lon], 10);\n    }\n  }, [selectedLocation]);\n\n  return (\n    <div>\n      <h2>Map</h2>\n      <div\n        id=\"map\"\n        style={{\n          height: '400px',\n          width: '100%',\n          margin: '10px 0'\n        }}\n      />\n      <p>\n        Selected Latitude:{' '}\n        {selectedLocation.lat ? selectedLocation.lat.toFixed(5) : '-'},\n        Longitude:{' '}\n        {selectedLocation.lon ? selectedLocation.lon.toFixed(5) : '-'}\n      </p>\n    </div>\n  );\n}\n\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}